apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: auth-middleware
spec:
  plugin:
    authentik-forward:
      address: https://auth.traefik.tuntelder.com
      timeout: "30s"
      tls:
        insecureSkipVerify: true
      unauthorizedStatusCode: 401
      redirectStatusCode: 302
      unauthorizedPaths:
        - "^/api/.*$"
        - "^/admin/.*$"
      redirectPaths:
        - "^/app/.*$"
        - "^/$"